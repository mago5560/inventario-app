<div class="header bg-gradient-danger pb-8 pt-5 pt-md-8">
    <div class="container-fluid">
      <div class="header-body"></div>
    </div>
  </div>
  <div class="container-fluid mt--7">
    <div class="row">
      <div class="center col-xl-12 order-xl-1">
        <div class="card bg-secondary shadow">
          <div class="card-header bg-white border-0">
            <div class="row align-items-center">
              <div class="col-8">
                <h3 class="mb-0">Entrada Tecleo</h3>
              </div>
              <div class="col-4 text-right">
                <button
                  type="button"
                  class="close"
                  aria-label="Close"
                  (click)="cerrar()"
                >
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
            </div>
          </div>
          <div class="card-body">
            <form>
              <div class="pl-lg-2">
         
                <div class="row">
                    <div class="col-lg-4 col-md-12 col-sm-12">
                        <div class="form-group">
                                <label class="form-control-label" for="input-fecha"
                                >Fecha</label>
                            <input
                                type="date"
                                id="input-fecha"
                                [(ngModel)]="cls.fecha"
                                name="fecha"
                                class="form-control form-control-alternative"
                                placeholder="Ingrese Fecha"
                                required
                            />
                        </div>
                    </div>
                    
                    <div class="col-lg-4 col-md-12 col-sm-12">
                        <div class="form-group">
                            <label class="form-control-label" for="select-proveedorLaboratorio"
                              >Seleccione Proveedor Laboratorio</label
                            >
                            <select
                              id="select-producto"
                              name="producto"
                              [(ngModel)]="selectIdProveedorLaboratorio"
                              class="form-control form-control-alternative"
                            >
                              <option
                                *ngFor="let _proveedorLaboratorio of datosProveedorLaboratorio"
                                value="{{ _proveedorLaboratorio.idProveedorLaboratorio }}"
                              >
                                {{ _proveedorLaboratorio.proveedor.nombreComercial }}
                              </option>
                            </select>
                          </div>
                      </div>

                    <div class="col-lg-4 col-md-12 col-sm-12">
                    <div class="form-group">
                        <label class="form-control-label" for="select-sucursal"
                          >Seleccione Sucursal</label
                        >
                        <select
                          id="select-sucursal"
                          name="sucursal"
                          [(ngModel)]="selectIdSucursal"
                          class="form-control form-control-alternative"
                        >
                          <option
                            *ngFor="let _sucursal of datosSucursal"
                            value="{{ _sucursal.idSucursal }}"
                          >
                            {{ _sucursal.nombre }}
                          </option>
                        </select>
                      </div>
                  </div>
                
                </div>
                
                <div class="row align-items-center">

                  <div class="col-6 text-left">
                    <h3>{{"Total: Q " +cls.total}}</h3>
                  </div>

                  <div class="col-6 text-right">
               
                    <a class="btn btn-lg btn-danger" (click)="cerrar()"
                      >Cancelar</a
                    >
                    <a class="btn btn-lg btn-primary"  (click)="openDialogFinalizar(modalFinalizarEntrega)"
                      *ngIf="this._datos.length && this.cls.idEntrada==0"
                      >Finalizar</a
                    >
                  </div>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <br/>
    <div class="row">
          <div class="col-xl-12 mb-5 mb-xl-0">
            <div class="card shadow">
              <div class="card-header border-0">
                <div class="row align-items-center">
                  <div class="col-lg-8 col-md-12 col-sm-12">
                    <div class="form-group">
                      <label class="form-control-label" for="select-producto"
                        >Seleccione Producto</label
                      >
                      <select
                        id="select-producto"
                        name="producto"
                        [(ngModel)]="selectIdProducto"
                        class="form-control form-control-alternative"
                      >
                        <option
                          *ngFor="let _producto of datosProducto"
                          value="{{ _producto.idProducto }}"
                        >
                          {{ _producto.nombre }}
                        </option>
                      </select>
                    </div>
                  </div>

                  <div class="col-lg-2 col-md-12 col-sm-12">
                    <div class="form-group">
                      <label class="form-control-label" for="input-cantidad"
                        >Cantidad</label
                      >
                      <input
                        type="number"
                        id="input-cantidad"
                        [(ngModel)]="clsDetalle.cantidad"
                        name="cantidad"
                        class="form-control form-control-alternative"
                        placeholder="Cantidad"
                        required
                      />
                    </div>
                  </div>

                  <div class="col-lg-2 col-md-12 col-sm-12">
                    <div class="form-group">
                      <label class="form-control-label" for="input-valor"
                        >Valor</label
                      >
                      <input
                        type="number"
                        id="input-valor"
                        [(ngModel)]="clsDetalle.valor"
                        name="valor"
                        class="form-control form-control-alternative"
                        placeholder="Valor"
                        required
                      />
                    </div>
                  </div>

                  
                </div>
                <div class="row">
                  <div class="col-lg-4 col-md-12 col-sm-12">
                    <div class="form-group">
                            <label class="form-control-label" for="input-fechaVencimiento"
                            >Fecha Vencimiento</label>
                        <input
                            type="date"
                            id="input-fechaVencimiento"
                            [(ngModel)]="clsDetalle.fechaVencimiento"
                            name="fechaVencimiento"
                            class="form-control form-control-alternative"
                            placeholder="Ingrese Fecha"
                            required
                        />
                    </div>
                  </div>

                  <div class="col-lg-6 col-md-12 col-sm-12">
                    <div class="form-group">
                      <label class="form-control-label" for="input-numeroLote"
                        >Numero de Lote</label
                      >
                      <input
                        type="number"
                        id="input-numeroLote"
                        [(ngModel)]="clsDetalle.numeroLote"
                        name="valor"
                        class="form-control form-control-alternative"
                        placeholder="Ingese el Numero de Lote"
                        required
                      />
                    </div>
                  </div>

                  <div class="col-lg-2 text-right">
                    <br/>
                    <a (click)="gabarDetalle()" class="btn btn-lg btn-primary"
                      >Agregar</a
                    >
                  </div>
                </div>
              </div>
              <div class="table-responsive">
                <!-- Projects table -->
                <table class="table align-items-center table-flush">
                  <thead class="thead-light">
                    <tr>
                      <th scope="col">Codigo</th>
                      <th scope="col">Producto</th>
                      <th scope="col">Cantidad</th>
                      <th scope="col">Valor</th>
                      <th scope="col">Sub Total</th>
                      <th scope="col">Acciones</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let element of _datos">
                      <td>{{ element.idEntradaDetalle }}</td>
                      <td scope="row">
                        {{ element.producto.nombre }}
                      </td>
                      <td scope="row">
                        {{ element.cantidad }}
                      </td>
                      <td scope="row">
                        {{ element.valor }}
                      </td>
                      <td scope="row">
                        {{ element.subTotal }}
                      </td>      
                      <td>
                        <button
                          class="btn btn-sm btn-primary"
                          (click)="modificarDetalle(element)"
                          *ngIf="cls.idEntrada==0"
                        >
                          <i class="fa fa-pen" aria-hidden="true"></i> Modificar
                        </button>
      
                        <button
                          type="button"
                          class="btn btn-sm btn-danger"
                          (click)="openDialogEliminar(modalEliminar, element)" 
                          *ngIf="cls.idEntrada==0"
                        >
                          <i class="fa fa-trash" aria-hidden="true"></i> Eliminar
                        </button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
  
    </div>

  </div>


  <ng-template #modalEliminar let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Eliminar Registro</h4>
      <button
        type="button"
        class="close"
        aria-label="Close"
        (click)="modal.dismiss('cancelar')"
      >
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <p>
        ¿Esta seguro que desea eliminar el registro?. Ya no podra recuperarlo.
      </p>
    </div>
    <div class="modal-footer">
      <button
        type="button"
        class="btn btn-outline-danger"
        (click)="modal.dismiss('cancelar')"
      >
        Cancelar
      </button>
      <button
        type="button"
        class="btn btn-outline-success"
        (click)="modal.close('aceptar')"
      >
        Aceptar
      </button>
    </div>
  </ng-template>

  <ng-template #modalFinalizarEntrega let-modal >
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Finalizar Entrada</h4>
      <button
        type="button"
        class="close"
        aria-label="Close"
        (click)="modal.dismiss('cancelar')"
      >
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <p>
        ¿Esta seguro de finalizar la entrega?
      </p>
    </div>
    <div class="modal-footer">
      <button
      type="button"
      class="btn btn-outline-danger"
      (click)="modal.close('cancelar')"
    >
      Cancelar
    </button>
      <button
        type="button"
        class="btn btn-outline-success"
        (click)="modal.close('aceptar')"
      >
        Aceptar
      </button>
    </div>
  </ng-template>